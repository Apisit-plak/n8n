# คำแนะนำแบบ Contextual สำหรับแต่ละ Action

## แนวคิด:
ทุก response ควรมีคำแนะนำคำถามถัดไปที่:
1. **เกี่ยวข้อง** กับสิ่งที่ผู้ใช้เพิ่งถาม
2. **ธรรมชาติ** เหมือนการสนทนา
3. **ชวนให้สำรวจต่อ** (exploration)

---

## 1. Invoice Detail (ดูรายละเอียด Invoice)

### คำถามที่ผู้ใช้ถาม:
```
IV0303304
```

### Response Template:
```
📄 รายละเอียด Invoice: IV0303304

👤 ลูกค้า: การ์เดียนอินดัสทรีส์ จำกัด (45-0096)
🏢 ศูนย์: ศูนย์กรุงเทพ (BKK001)
📅 วันที่: 15 ม.ค. 2025
💰 ยอดรวม: 125,450.00 บาท

📦 รายการสินค้า (5 รายการ):
1. A-001 - สินค้า A (จำนวน 10) - 50,000.00 บาท
2. B-002 - สินค้า B (จำนวน 5) - 25,000.00 บาท
...

━━━━━━━━━━━━━━━━━━━━━━━━
💡 ต้องการดูข้อมูลเพิ่มเติม?
• "การ์เดียนอินดัสทรีส์ มี invoice อะไรบ้าง" - ดู invoice ทั้งหมดของลูกค้านี้
• "สินค้า A ขายดีที่สุดไหม" - ดูสินค้าขายดี
• "ศูนย์กรุงเทพ ยอดขายเท่าไหร่" - ดูยอดขายศูนย์นี้
```

### หลักการ:
- แนะนำให้ดู invoice อื่นๆ ของลูกค้าเดียวกัน
- แนะนำให้ดูสินค้าที่อยู่ใน invoice
- แนะนำให้ดูข้อมูลศูนย์/หน่วยงาน

---

## 2. Customer Invoices (Invoice ของลูกค้า)

### คำถามที่ผู้ใช้ถาม:
```
การ์เดียนอินดัสทรีส์ invoice
```

### Response Template:
```
📋 Invoice ของลูกค้า: การ์เดียนอินดัสทรีส์ จำกัด (45-0096)

จำนวนทั้งหมด: 25 รายการ
ยอดรวมทั้งหมด: 5,250,000.00 บาท

รายการล่าสุด:
1. IV0303304 - 15 ม.ค. 2025 - 125,450.00 บาท
2. IV0303250 - 12 ม.ค. 2025 - 89,500.00 บาท
3. IV0303201 - 08 ม.ค. 2025 - 156,800.00 บาท
...

━━━━━━━━━━━━━━━━━━━━━━━━
💡 ต้องการดูข้อมูลเพิ่มเติม?
• "IV0303304" - ดูรายละเอียด invoice นี้
• "ลูกค้าไหนยอดเยอะสุด" - ดูลูกค้ายอดเยอะสุด
• "ยอด invoice แต่ละเดือน" - ดูสถิติรายเดือน
• "สินค้าอะไรที่การ์เดียนซื้อบ่อย" - วิเคราะห์สินค้า
```

### หลักการ:
- แนะนำให้เจาะลึกดู invoice แต่ละรายการ
- แนะนำให้เปรียบเทียบกับลูกค้ารายอื่น
- แนะนำให้ดูแนวโน้มตามเวลา

---

## 3. Top Items (สินค้าขายดี)

### คำถามที่ผู้ใช้ถาม:
```
สินค้าขายดีที่สุด 6 เดือน
TOP 10 สินค้า
```

### Response Template:
```
🏆 สินค้าขายดีที่สุด (TOP 10) - 6 เดือนย้อนหลัง

1. 📦 A-001 - สินค้า A
   💰 ยอดขาย: 2,500,000.00 บาท
   📊 จำนวน: 500 ชิ้น | 125 Invoice
   🏢 ขายได้ 8 ศูนย์: ศูนย์กรุงเทพ, ศูนย์เชียงใหม่, ...

2. 📦 B-002 - สินค้า B
   💰 ยอดขาย: 1,850,000.00 บาท
   📊 จำนวน: 370 ชิ้น | 98 Invoice
   🏢 ขายได้ 6 ศูนย์: ศูนย์กรุงเทพ, ศูนย์ขอนแก่น, ...

...

━━━━━━━━━━━━━━━━━━━━━━━━
💡 ต้องการวิเคราะห์เพิ่มเติม?
• "สินค้า A ขายได้ศูนย์ไหนบ้าง" - ดูรายละเอียดสินค้านี้
• "สินค้าขายดี 1 ปี" - ดูแนวโน้มระยะยาว
• "product แยกตามกลุ่ม" - ดูตามหมวดหมู่
• "ศูนย์ไหนยอดขายเยอะสุด 6 เดือน" - ดูศูนย์ที่ขายดี
• "ยอด invoice แต่ละเดือน" - ดูแนวโน้มรายเดือน
```

### หลักการ:
- แนะนำให้เจาะลึกสินค้าที่สนใจ
- แนะนำให้เปลี่ยนช่วงเวลา
- แนะนำให้ดูข้อมูลที่เกี่ยวข้อง (ศูนย์, หมวดหมู่)

---

## 4. Top Center (ศูนย์/หน่วยงานยอดขายเยอะสุด)

### คำถามที่ผู้ใช้ถาม:
```
ศูนย์ไหนยอดขายเยอะสุดปีที่แล้ว
TOP 5 ศูนย์ยอดขาย 6 เดือน
```

### Response Template:
```
📊 ศูนย์/หน่วยงานยอดขายเยอะสุด (TOP 5) - 6 เดือนย้อนหลัง

🏢 1. ศูนย์กรุงเทพ (BKK001)
   💰 ยอดขายรวม: 15,500,000.00 บาท
   💵 ยอดไม่รวม VAT: 14,485,981.31 บาท
   📄 จำนวน Invoice: 250 รายการ
   📦 จำนวนสินค้า: 1,250 รายการ
   📊 ยอดเฉลี่ย: 62,000.00 บาท/Invoice
   📋 Invoice ล่าสุด: IV0303304, IV0303250, IV0303201

🏢 2. ศูนย์เชียงใหม่ (CNX002)
   💰 ยอดขายรวม: 12,300,000.00 บาท
   ...

━━━━━━━━━━━━━━━━━━━━━━━━
💡 ต้องการวิเคราะห์เพิ่มเติม?
• "ศูนย์กรุงเทพ ขายสินค้าอะไรบ้าง" - ดูสินค้าที่ขาย
• "ศูนย์ยอดขาย 1 ปี" - ดูแนวโน้มระยะยาว
• "สินค้าขายดีที่สุด 6 เดือน" - ดูสินค้าขายดี
• "ยอด invoice แต่ละเดือน" - ดูแนวโน้มรายเดือน
• "เปรียบเทียบศูนย์กรุงเทพกับเชียงใหม่" - เปรียบเทียบศูนย์
```

### หลักการ:
- แนะนำให้เจาะลึกศูนย์ที่สนใจ
- แนะนำให้เปลี่ยนช่วงเวลา
- แนะนำให้ดูสินค้าที่ศูนย์นั้นขาย
- แนะนำให้เปรียบเทียบศูนย์

---

## 5. Monthly Sales (ยอดขายรายเดือน)

### คำถามที่ผู้ใช้ถาม:
```
ยอด invoice แต่ละเดือน
ยอดขายรายเดือนปีนี้
```

### Response Template:
```
📈 ยอด Invoice รายเดือน - 12 เดือนย้อนหลัง

ม.ค. 2025: 💰 8,500,000 บาท (180 Invoice) 📊 ยอดเฉลี่ย 47,222 บาท
ธ.ค. 2024: 💰 12,300,000 บาท (250 Invoice) 📊 ยอดเฉลี่ย 49,200 บาท ⭐ สูงสุด
พ.ย. 2024: 💰 9,800,000 บาท (220 Invoice) 📊 ยอดเฉลี่ย 44,545 บาท
ต.ค. 2024: 💰 8,200,000 บาท (175 Invoice) 📊 ยอดเฉลี่ย 46,857 บาท
...

📊 สรุป:
• เดือนที่ยอดสูงสุด: ธันวาคม 2024 (12.3M บาท)
• เดือนที่ยอดต่ำสุด: มีนาคม 2024 (6.8M บาท)
• ยอดเฉลี่ยต่อเดือน: 9.2M บาท

━━━━━━━━━━━━━━━━━━━━━━━━
💡 ต้องการวิเคราะห์เพิ่มเติม?
• "เดือนธันวาคม ขายอะไรบ้าง" - ดูรายละเอียดเดือนนั้น
• "สินค้าขายดีเดือนธันวาคม" - ดูสินค้าขายดี
• "ศูนย์ไหนยอดขายเยอะสุดเดือนธันวาคม" - ดูศูนย์ที่ขายดี
• "product แยกตามกลุ่ม 1 ปี" - ดูตามหมวดหมู่
• "เปรียบเทียบยอดขายปีนี้กับปีที่แล้ว" - เปรียบเทียบปี
```

### หลักการ:
- แนะนำให้เจาะลึกเดือนที่น่าสนใจ (สูงสุด/ต่ำสุด)
- แนะนำให้ดูว่าเดือนนั้นขายอะไร
- แนะนำให้เปรียบเทียบกับปีอื่น

---

## 6. Product Group Sales (สินค้าแยกตามกลุ่ม)

### คำถามที่ผู้ใช้ถาม:
```
product แยกตามกลุ่ม
ยอดขายสินค้าแต่ละกลุ่ม 1 ปี
```

### Response Template:
```
📊 ยอดขายแยกตามกลุ่มสินค้า - 1 ปีย้อนหลัง

1. 📦 Group 1 - อุปกรณ์อิเล็กทรอนิกส์
   💰 ยอดขาย: 25,500,000.00 บาท (45% ของยอดรวม)
   📊 จำนวนสินค้า: 150 รายการ | 850 Invoice
   📦 จำนวนรวม: 3,500 ชิ้น

2. 📦 Group 2 - อะไหล่รถยนต์
   💰 ยอดขาย: 18,300,000.00 บาท (32% ของยอดรวม)
   📊 จำนวนสินค้า: 120 รายการ | 620 Invoice
   📦 จำนวนรวม: 2,800 ชิ้น

...

━━━━━━━━━━━━━━━━━━━━━━━━
💡 ต้องการวิเคราะห์เพิ่มเติม?
• "สินค้า Group 1 ขายดีที่สุดตัวไหน" - ดูสินค้าในกลุ่มนี้
• "ศูนย์ไหนขาย Group 1 เยอะสุด" - ดูศูนย์ที่ขายกลุ่มนี้
• "สินค้าขายดีที่สุด 1 ปี" - ดูสินค้าขายดีทั้งหมด
• "product แยกตามกลุ่ม 6 เดือน" - ดูช่วงเวลาสั้นลง
• "ยอด invoice แต่ละเดือน" - ดูแนวโน้มรายเดือน
```

### หลักการ:
- แนะนำให้เจาะลึกกลุ่มที่สนใจ
- แนะนำให้ดูสินค้าในกลุ่มนั้น
- แนะนำให้ดูศูนย์ที่ขายกลุ่มนั้น

---

## 7. Error Cases (กรณีไม่มีข้อมูล)

### Response Template:
```
ขออภัยครับ ไม่พบข้อมูลในช่วงเวลาที่ระบุ 😔

🔍 สาเหตุที่เป็นไปได้:
  • ปีนี้เพิ่งเริ่มต้น อาจยังไม่มีข้อมูลเพียงพอ
  • ไม่มีข้อมูลในช่วงเวลาที่เลือก

💡 ลองเปลี่ยนเป็น:
  • "ศูนย์ไหนยอดขายเยอะสุดปีที่แล้ว" - ดูปีที่แล้ว
  • "ศูนย์ยอดขาย 12 เดือน" - ดู 12 เดือนย้อนหลัง
  • "TOP 5 ศูนย์ยอดขาย 6 เดือน" - ดู 6 เดือนย้อนหลัง
  • "สินค้าขายดีที่สุดปีที่แล้ว" - ดูสินค้าขายดี
```

---

## 8. Unknown (ไม่เข้าใจคำถาม)

### Response Template:
```
ไม่เข้าใจคำถาม กรุณาลองใช้รูปแบบต่อไปนี้:

🔍 คำถามยอดนิยม:

📋 ดูข้อมูล Invoice:
  • "IV0303304" - ดูรายละเอียด invoice
  • "การ์เดียนอินดัสทรีส์ invoice" - ดู invoice ของลูกค้า

🏆 วิเคราะห์ยอดขาย:
  • "สินค้าขายดีที่สุด 6 เดือน" - สินค้าขายดี
  • "ศูนย์ไหนยอดขายเยอะสุดปีที่แล้ว" - ศูนย์ยอดเยอะ
  • "TOP 10 สินค้า 3 เดือน" - TOP สินค้า

📊 ดูสถิติ:
  • "ยอด invoice แต่ละเดือน" - ยอดรายเดือน
  • "product แยกตามกลุ่ม 1 ปี" - แยกตามหมวดหมู่

💡 เริ่มต้นลองถาม:
  • "สินค้าอะไรขายดีที่สุด"
  • "ศูนย์ไหนยอดเยอะสุด"
```

---

## สรุปหลักการทำ Contextual Suggestions:

### 1. **เกี่ยวข้อง (Relevant)**
- ถ้าดู invoice → แนะนำให้ดูลูกค้า, สินค้า, ศูนย์
- ถ้าดูสินค้า → แนะนำให้ดูศูนย์, กลุ่ม, ช่วงเวลา
- ถ้าดูศูนย์ → แนะนำให้ดูสินค้า, เปรียบเทียบ, ช่วงเวลา

### 2. **ธรรมชาติ (Natural)**
- ใช้ภาษาที่เป็นกันเอง
- ใช้ emoji เพื่อให้น่าสนใจ
- ใช้คำถามแบบธรรมชาติ ไม่ใช่คำสั่ง

### 3. **หลากหลาย (Diverse)**
- แนะนำ 3-5 ตัวเลือก
- ครอบคลุมทั้ง drill-down, time-based, comparison
- ให้ทั้งคำถามคล้ายเดิมและคำถามแนวอื่น

### 4. **Action-driven**
- ทุกคำแนะนำต้องทำให้ผู้ใช้ลองถามได้จริง
- ใช้ภาษาที่สามารถ copy-paste ได้เลย
- ไม่ซับซ้อนเกินไป

---

## Template สำหรับแต่ละ Action:

```javascript
// ตัวอย่าง Template
const suggestions = {
  invoice_detail: [
    "{customer_name} มี invoice อะไรบ้าง",
    "สินค้า {item_name} ขายดีที่สุดไหม",
    "{department_name} ยอดขายเท่าไหร่"
  ],
  
  customer_invoices: [
    "{invoice_no}",
    "ลูกค้าไหนยอดเยอะสุด",
    "ยอด invoice แต่ละเดือน"
  ],
  
  top_items: [
    "สินค้า {item_name} ขายได้ศูนย์ไหนบ้าง",
    "สินค้าขายดี {different_period}",
    "product แยกตามกลุ่ม",
    "ศูนย์ไหนยอดขายเยอะสุด {same_period}"
  ],
  
  top_center: [
    "{center_name} ขายสินค้าอะไรบ้าง",
    "ศูนย์ยอดขาย {different_period}",
    "สินค้าขายดีที่สุด {same_period}",
    "ยอด invoice แต่ละเดือน"
  ],
  
  monthly_sales: [
    "เดือน{month} ขายอะไรบ้าง",
    "สินค้าขายดีเดือน{month}",
    "ศูนย์ไหนยอดขายเยอะสุดเดือน{month}",
    "product แยกตามกลุ่ม {period}"
  ],
  
  product_group_sales: [
    "สินค้า {group_name} ขายดีที่สุดตัวไหน",
    "ศูนย์ไหนขาย {group_name} เยอะสุด",
    "สินค้าขายดีที่สุด {period}",
    "product แยกตามกลุ่ม {different_period}"
  ]
};
```

---

## ตัวอย่างการใช้งาน:

### Before (แบบเดิม):
```
ผลลัพธ์: ศูนย์กรุงเทพยอดขายเยอะสุด

(จบ - ไม่มีคำแนะนำ)
```

### After (แบบใหม่):
```
📊 ศูนย์/หน่วยงานยอดขายเยอะสุด (TOP 10)

🏢 1. ศูนย์กรุงเทพ (BKK001)
   ...

━━━━━━━━━━━━━━━━━━━━━━━━
💡 ต้องการวิเคราะห์เพิ่มเติม?
• "ศูนย์กรุงเทพ ขายสินค้าอะไรบ้าง"
• "ศูนย์ยอดขาย 1 ปี"
• "สินค้าขายดีที่สุด 6 เดือน"
• "ยอด invoice แต่ละเดือน"
```

**ผู้ใช้มีทางเลือกถามต่อ 4 ทาง → การสนทนาต่อเนื่อง** ✅
