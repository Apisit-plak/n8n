# Parser Features - รองรับหลายๆอย่าง

## สรุปการปรับปรุง

Parser ได้รับการปรับปรุงให้รองรับรูปแบบคำถามที่หลากหลายมากขึ้น ทั้งภาษาไทยและอังกฤษ

---

## 1. Invoice Detail (ดู Invoice)

### รูปแบบที่รองรับ:
- `IV0303304` (Invoice Number)
- `IV1234567` (รูปแบบ IV + 7 หลัก)

### ตัวอย่าง:
- "IV0303304"
- "IV1234567"

---

## 2. Customer Invoices (Invoice ของลูกค้า)

### Keywords ที่รองรับ:
- **Invoice:** `INVOICE`, `INVOICES`, `INV`, `BILL`, `BILLS`, `RECEIPT`, `ใบแจ้งหนี้`, `บิล`, `ใบกำกับ`, `ใบเสร็จ`
- **Customer:** `ลูกค้า`, `CUSTOMER`, `CLIENT`, `ของ`, `FROM`
- **Question:** `อะไร`, `บ้าง`, `WHAT`, `WHICH`, `LIST`, `SHOW`, `ดู`, `แสดง`, `มีอะไร`, `มีบ้าง`, `มีอะไรบ้าง`
- **Action:** `อยากรู้`, `ต้องการ`, `ขอ`, `ช่วย`, `แสดง`, `SHOW`, `LIST`, `ดู`

### ตัวอย่าง:
- "การ์เดียนอินดัสทรีส์ invoice"
- "invoice การ์เดียนอินดัสทรีส์"
- "ดู invoice ของ การ์เดียนอินดัสทรีส์"
- "การ์เดียนอินดัสทรีส์ มี invoice อะไรบ้าง"
- "SHOW INVOICES FOR การ์เดียนอินดัสทรีส์"
- "LIST BILLS OF การ์เดียนอินดัสทรีส์"

---

## 3. Top Items (รายการยอดเยอะสุด)

### Keywords ที่รองรับ:
- **Items:** `รายการ`, `สินค้า`, `PRODUCT`, `PRODUCTS`, `ITEM`, `ITEMS`, `ของ`
- **Top Indicators:** `ยอดเยอะ`, `เยอะสุด`, `มากสุด`, `สูงสุด`, `TOP`, `BEST`, `SELLING`, `ขายดี`, `ขายเยอะ`, `ยอดขาย`, `SALES`, `ยอด`, `AMOUNT`, `อันดับ`, `RANK`, `RANKING`, `ลำดับ`
- **Limit:** รองรับการระบุจำนวน เช่น "TOP 10", "10 รายการ", "10 สินค้า", "รายการ 10", "10 อันดับ"

### ตัวอย่าง:
- "TOP 10 สินค้า 6 เดือน"
- "TOP10 สินค้า 2 เดือน"
- "10 รายการยอดเยอะสุด 3 เดือน"
- "รายการ 10 ยอดเยอะสุด 1 ปี"
- "สินค้าขายดีที่สุด 6 เดือน"
- "BEST SELLING ITEMS 2 MONTHS"
- "TOP 20 PRODUCTS 1 YEAR"
- "10 อันดับสินค้าขายดี 3 เดือน"
- "RANKING TOP 15 ITEMS 6 MONTHS"

---

## 4. Top Center (หน่วยงานยอดเยอะสุด)

### Keywords ที่รองรับ:
- **Center:** `ศูนย์`, `หน่วยงาน`, `SBU`, `CENTER`, `CENTERS`, `BRANCH`, `BRANCHES`, `สาขา`, `DEPARTMENT`, `DEPT`, `หน่วย`, `แผนก`, `DIVISION`, `SECTION`
- **Sales:** `ยอดขาย`, `SALES`, `ยอด`, `ขาย`, `REVENUE`, `INCOME`, `AMOUNT`, `ยอดรวม`, `TOTAL`, `SUM`
- **Top Indicators:** `เยอะ`, `มาก`, `สูง`, `TOP`, `BEST`, `อันดับ`, `RANK`, `RANKING`, `ลำดับ`
- **Limit:** รองรับการระบุจำนวน เช่น "TOP 5 ศูนย์"

### ตัวอย่าง:
- "ศูนย์ไหนยอดขายเยอะสุด"
- "SBU ยอดเยอะสุดปีนี้"
- "TOP 5 ศูนย์ยอดขาย 6 เดือน"
- "หน่วยงานไหนยอดขายเยอะสุด 2 เดือน"
- "BEST BRANCH SALES 1 YEAR"
- "TOP 10 CENTERS 3 MONTHS"
- "อันดับ 5 ศูนย์ยอดขาย 6 เดือน"

---

## 5. Monthly Sales (ยอดรายเดือน)

### Keywords ที่รองรับ:
- **Monthly:** `แต่ละเดือน`, `รายเดือน`, `MONTHLY`, `เดือน`, `MONTH`, `MONTHS`, `รายเดือน`, `PER MONTH`, `MONTHLY REPORT`, `รายงานรายเดือน`
- **Indicators:** `ยอด`, `INVOICE`, `INVOICES`, `ขาย`, `SALES`, `REVENUE`, `AMOUNT`, `ยอดรวม`, `TOTAL`, `SUM`, `รายงาน`, `REPORT`, `STATISTICS`

### ตัวอย่าง:
- "ยอด invoice แต่ละเดือน"
- "ยอดขายรายเดือนปีนี้"
- "รายงานยอดขายรายเดือน 12 เดือน"
- "MONTHLY SALES REPORT 1 YEAR"
- "ยอดขายรายเดือน 6 เดือน"
- "รายงานรายเดือน 2 ปี"

---

## 6. Product Group Sales (กลุ่มสินค้า)

### Keywords ที่รองรับ:
- **Product:** `PRODUCT`, `PRODUCTS`, `สินค้า`, `ITEM`, `ITEMS`, `ของ`
- **Group:** `กลุ่ม`, `GROUP`, `GROUPS`, `CATEGORY`, `CATEGORIES`, `หมวด`, `ประเภท`, `TYPE`, `TYPES`, `CLASS`, `CLASSIFICATION`
- **Indicators:** `แยก`, `SEPARATE`, `BY GROUP`, `BY CATEGORY`, `ตามกลุ่ม`, `ตามหมวด`

### ตัวอย่าง:
- "product แยกตามกลุ่ม"
- "ยอดขายสินค้าแต่ละกลุ่ม"
- "สินค้าแยกตาม category 1 ปี"
- "PRODUCT BY GROUP 6 MONTHS"
- "CATEGORY SALES 2 YEARS"
- "ยอดขายสินค้าแยกตามประเภท 3 เดือน"

---

## 7. Time Period (ระยะเวลา)

### รูปแบบที่รองรับ:
- **ตัวเลข + หน่วยเวลา:**
  - `6 เดือน`, `3 เดือน`, `2 เดือน`, `1 เดือน`
  - `1 ปี`, `2 ปี`, `3 ปี`
  - `2 สัปดาห์`, `4 สัปดาห์`
  - `7 วัน`, `30 วัน`
  - `6 MONTHS`, `1 YEAR`, `2 WEEKS`, `7 DAYS`

- **คำเฉพาะ:**
  - `ปีนี้`, `ปีที่แล้ว`
  - `เดือนนี้`, `เดือนที่แล้ว`
  - `สัปดาห์นี้`
  - `วันนี้`, `เมื่อวาน`

- **รูปแบบวันที่:**
  - `2024-01`, `2024/01`
  - `2024-01-01`

### ตัวอย่าง:
- "TOP 10 สินค้า 6 เดือน"
- "ยอดขาย 1 ปี"
- "รายงาน 2 เดือน"
- "SALES 3 MONTHS"
- "REPORT 1 YEAR"

---

## 8. Limit (จำนวนรายการ)

### รูปแบบที่รองรับ:
- `TOP 10` → limit: 10
- `TOP10` → limit: 10
- `10 รายการ` → limit: 10
- `10 สินค้า` → limit: 10
- `รายการ 10` → limit: 10
- `10 อันดับ` → limit: 10
- `10 ลำดับ` → limit: 10

### ตัวอย่าง:
- "TOP 10 สินค้า 6 เดือน" → limit: 10
- "20 รายการยอดเยอะสุด" → limit: 20
- "5 อันดับศูนย์ยอดขาย" → limit: 5

---

## 9. Error Messages

### Missing Name:
```
กรุณาพิมพ์ชื่อลูกค้าตามด้วยคำว่า invoice เช่น:
- "การ์เดียนอินดัสทรีส์ invoice"
- "invoice การ์เดียนอินดัสทรีส์"
- "ดู invoice ของ การ์เดียนอินดัสทรีส์"
- "การ์เดียนอินดัสทรีส์ มี invoice อะไรบ้าง"
```

### Unknown:
```
ไม่เข้าใจคำถาม กรุณาลองใช้รูปแบบต่อไปนี้:

1. ดู Invoice:
   - "IV0303304"
   - "การ์เดียนอินดัสทรีส์ invoice"
   - "ดู invoice ของ การ์เดียนอินดัสทรีส์"

2. รายการยอดเยอะสุด:
   - "TOP 10 สินค้า 6 เดือน"
   - "รายการยอดเยอะสุด 2 เดือน"
   - "สินค้าขายดีที่สุด 1 ปี"
   - "10 สินค้าขายดี 3 เดือน"

3. หน่วยงานยอดเยอะสุด:
   - "ศูนย์ไหนยอดขายเยอะสุด"
   - "SBU ยอดเยอะสุดปีนี้"
   - "TOP 5 ศูนย์ยอดขาย 6 เดือน"

4. ยอดรายเดือน:
   - "ยอด invoice แต่ละเดือน"
   - "ยอดขายรายเดือนปีนี้"
   - "รายงานยอดขายรายเดือน 12 เดือน"

5. กลุ่มสินค้า:
   - "product แยกตามกลุ่ม"
   - "ยอดขายสินค้าแต่ละกลุ่ม"
   - "สินค้าแยกตาม category 1 ปี"
```

---

## 10. การใช้งาน

1. Copy โค้ดจาก `n8n_code_parser.js` ไปวางใน Code node
2. ตั้งค่า Code node เป็น "Run Once for Each Item"
3. ทดสอบด้วยคำถามต่างๆ ตามตัวอย่างด้านบน

---

## หมายเหตุ

- Parser รองรับทั้งภาษาไทยและอังกฤษ
- Parser รองรับรูปแบบคำถามที่หลากหลาย
- Parser extract ข้อมูลอัตโนมัติ (limit, time_period, customer_name)
- Parser ส่ง error message ที่ชัดเจนเมื่อไม่เข้าใจคำถาม
